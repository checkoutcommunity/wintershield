!function(){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function r(e,t,r){return e(r={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},r.exports),r.exports}function n(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})})),t}var o=r((function(t,r){var n,o;o=function(e,t){var r="XMLHttpRequest"in window?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");r.open("POST",e,!1),r.withCredentials=!0,r.setRequestHeader("Accept","*/*"),"string"==typeof t?(r.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),r.responseType="text/plain"):"[object Blob]"==={}.toString.call(t)&&t.type&&r.setRequestHeader("Content-Type",t.type);try{r.send(t)}catch(n){}return!0},"navigator"in(n="object"==typeof window?window:e)&&"sendBeacon"in n.navigator&&(o=navigator.sendBeacon.bind(navigator)),t.exports&&(r=t.exports=o),r.sendBeacon=o})),i=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===a}(e)}(e)},a="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function s(e,t){return!1!==t.clone&&t.isMergeableObject(e)?p(Array.isArray(e)?[]:{},e,t):e}function c(e,t,r){return e.concat(t).map((function(e){return s(e,r)}))}function u(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return e.propertyIsEnumerable(t)})):[]}(e))}function l(e,t){try{return t in e}catch(r){return!1}}function p(e,t,r){(r=r||{}).arrayMerge=r.arrayMerge||c,r.isMergeableObject=r.isMergeableObject||i,r.cloneUnlessOtherwiseSpecified=s;var n=Array.isArray(t);return n===Array.isArray(e)?n?r.arrayMerge(e,t,r):function(e,t,r){var n={};return r.isMergeableObject(e)&&u(e).forEach((function(t){n[t]=s(e[t],r)})),u(t).forEach((function(o){(function(e,t){return l(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,o)||(n[o]=l(e,o)&&r.isMergeableObject(t[o])?function(e,t){if(!t.customMerge)return p;var r=t.customMerge(e);return"function"==typeof r?r:p}(o,r)(e[o],t[o],r):s(t[o],r))})),n}(e,t,r):s(t,r)}p.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,r){return p(e,r,t)}),{})};var f=p,h=r((function(e,t){var r,n;Object.defineProperty(t,"__esModule",{value:!0}),(r=t.EActionTypes||(t.EActionTypes={})).PAGE_VIEW_ACTION="page_view",r.VIEW_ACTION="view",r.SHOW_ACTION="show",r.CLOSE_ACTION="close",r.ADD_ACTION="add",r.CLEAR_ACTION="clear",r.SCREEN_CLICK="screen_click",r.DECREMENT_ACTION="decrement",r.INCREMENT_ACTION="increment",r.DISLIKE_ACTION="dislike",r.LIKE_ACTION="like",r.SET_ACTION="set",r.UNSET_ACTION="unset",r.CLICK_ACTION="click",r.SELECT_ACTION="select",r.UNSELECT_ACTION="unselect",r.REGION_SET_ACTION="region_set",r.WIDGET_VIEW_ACTION="widget_view",r.EXIT_LINK_ACTION="exit_link",r.SHARE_ACTION="share",r.SAVE_ACTION="save",r.RESTORE_ACTION="restore",r.RETURN_ACTION="return",r.BACK_ACTION="back",r.UNLOAD="unload",r.SUBMIT="submit",r.DELETE="delete",r.EDIT="edit",r.CLICK_CLUSTER="click_cluster",r.GO_TO_PAYMENT="go_to_payment",r.CLICK_CANCEL="click_cancel",r.CLICK_RETURN_ITEMS="click_return_items",r.CLICK_DELIVERY_TIME="click_delivery_time",r.PAGE_CLOSE="page_close",r.CLICK_EXTEND_DELIVERY="click_extend_delivery",r.EXTEND_DELIVERY="extend_delivery",r.CHANGE_PAYMENT_TYPE="change_payment_type",r.CLICK_RECEIVER="click_receiver",r.CHANGE_RECEIVER="change_receiver",r.CLICK_NEW_CARD="click_new_card",r.PAGE_SCROLL="page_scroll",r.CLICK_LEAVE_AT_DOOR="click_leave_at_door",r.LEAVE_AT_DOOR="leave_at_door",r.DOWNLOAD_ACTIVATION_CODE="download_activation_code",r.SWITCH_TALK_TYPE="switch_talk_type",r.GROUP_IN_CART="group_in_cart",r.CART_VIEW="cart_view",r.TO_CART_ACTION="to_cart",r.TO_CART_ALL_ACTION="to_cart_all",r.REMOVE_ACTION="remove",r.REMOVE_ALL_ACTION="remove_all",r.AVAIL_ON_ACTION="avail_on",r.AVAIL_OFF_ACTION="avail_off",r.FAVORITE_ACTION="favorite",r.UNFAVORITE_ACTION="unfavorite",r.COMPARE_ACTION="compare",r.UNCOMPARE_ACTION="uncompare",r.PRICE_SUBSCRIBE_ACTION="subscribe_price",r.PRICE_UNSUBSCRIBE_ACTION="unsubscribe_price",r.SUBSCRIBE_ACTION="subscribe",r.SUBSCRIPTION_PRODUCT_ACTION="subscription_product",r.UNSUBSCRIBE_ACTION="unsubscribe",r.SPLIT_IN_PRE_ORDER="split_in_pre_order",r.FULL_VIEW_ACTION="full_view",r.PRE_ORDER_ACTION="pre_order",r.RE_ORDER_ACTION="re_order",r.CANCEL_ACTION="cancel",r.CANCEL_CONFIRM_ACTION="cancel_confirm",r.ORDER_PREMIUM_ACTION="order_premium",r.TO_CHECKOUT_ACTION="to_checkout",r.TO_CREDIT_CHECKOUT_ACTION="to_credit_checkout",r.ORDER_ACTION="order",r.BACK_TO_CART_ACTION="back_to_cart",r.ADD_ADDRESS="add_address",r.BUTTON_CLICK_ADDRESS_CHANGE_ACTION="button_click_address_change",r.CHANGE_DELIVERY_SERVICE_ACTION="change_delivery_service",r.CHANGE_SAFE_ADDRESS_ACTION="change_safe_address",r.SELECT_DELIVERY_ACTION="select_delivery",r.CHANGE_DUE_ACTION="change_due",r.CHANGE_TIME_SLOT_ACTION="change_time_slot",r.PROMOCODE_ACTIVATION_ACTION="promocode_activation",r.ADDRESS_IN_ADDRESSBOOK="address_in_addressbook",r.SELECT_ADDRESS_ACTION="select_address",r.MAP_VIEW="map_view",r.COURIER_MAP_VIEW_ACTION="courier_map_view",r.SUGGEST_REGION_ACTION="suggest_region",r.SUGGEST_COUNTRY_ACTION="suggest_country",r.SUGGEST_ADDRESS_ACTION="suggest_address",r.MAP_ADDRESS_ACTION="map_address",r.MAP_REGION_ACTION="map_region",r.REVERSE_GEOCODE_FAIL_ACTION="reverse_geocode_fail",r.CLICK_ALL_PAYMENT_ACTION="click_on_all_payment",r.PAYMENT_SUCCESS_ACTION="payment_success",r.SEARCH_ACTION="search",r.SEARCH_HELPER_ACTION="search_helper",r.CHOOSE_DEPARTAMENT_ACTION="choose_department",r.LOGIN_ACTION="login",r.LOGOUT_ACTION="logout",r.REGISTRATION_ACTION="registration",r.PHONE_CHANGE_ACTION="phone_change",r.EMAIL_CHANGE_ACTION="email_change",r.LOGIN_CHANGE_ACTION="login_change",r.PASSWORD_CHANGE_ACTION="password_change",r.REPORT_ACTION="report",r.CARD_ORDER_CLICK_ACTION="card_order_button_click",r.CARD_NEXT_BUTTON_CLICK_ACTION="next_button_click",r.CARD_NAVI_CLICK_ACTION="navigation_click",r.CARD_TERMS_CLICK_ACTION="terms_of_use_link_click",r.CARD_DONE_BUTTON_CLICK_ACTION="done_button_click",r.IMPRESSION_ACTION="impression",r.OPEN="open",r.CHAT_OPEN="open",r.DIALOG_LIST="dialog_list",r.VIDEO_VIEW="video_view",r.VIDEO_VIEW_FINISH="video_view_finish",r.VIDEO_REWIND="video_rewind",(n=t.EPlatform||(t.EPlatform={})).SITE="site",n.MOBILE_SITE="mobile_site"})),d=r((function(e,t){e.exports=function(){function e(){for(var e=arguments,t=0,r={};t<arguments.length;t++){var n=e[t];for(var o in n)r[o]=n[o]}return r}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function r(n){function o(){}function i(t,r,i){if("undefined"!=typeof document){"number"==typeof(i=e({path:"/"},o.defaults,i)).expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var a=JSON.stringify(r);/^[\{\[]/.test(a)&&(r=a)}catch(v){}r=n.write?n.write(r,t):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var c in i)i[c]&&(s+="; "+c,!0!==i[c]&&(s+="="+i[c].split(";")[0]));return document.cookie=t+"="+r+s}}function a(e,r){if("undefined"!=typeof document){for(var o={},i=document.cookie?document.cookie.split("; "):[],a=0;a<i.length;a++){var s=i[a].split("="),c=s.slice(1).join("=");r||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var u=t(s[0]);if(c=(n.read||n)(c,u)||t(c),r)try{c=JSON.parse(c)}catch(v){}if(o[u]=c,e===u)break}catch(l){}}return e?o[e]:o}}return o.set=i,o.get=function(e){return a(e,!1)},o.getJSON=function(e){return a(e,!0)},o.remove=function(t,r){i(t,"",e(r,{expires:-1}))},o.defaults={},o.withConverter=r,o}((function(){}))}()})),_=t(r((function(e){function t(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(u){return void r(u)}s.done?t(c):Promise.resolve(c).then(n,o)}e.exports=function(e){return function(){var r=this,n=arguments;return new Promise((function(o,i){var a=e.apply(r,n);function s(e){t(a,o,i,s,c,"next",e)}function c(e){t(a,o,i,s,c,"throw",e)}s(void 0)}))}},e.exports.default=e.exports,e.exports.__esModule=!0}))),v=t(r((function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.default=e.exports,e.exports.__esModule=!0}))),g=t(r((function(e){function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e},e.exports.default=e.exports,e.exports.__esModule=!0}))),y=r((function(e){var t=function(e){var t,r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=Object.create((t&&t.prototype instanceof v?t:v).prototype),i=new N(n||[]);return o._invoke=function(e,t,r){var n=p;return function(o,i){if(n===h)throw new Error("Generator is already running");if(n===d){if("throw"===o)throw i;return R()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=A(a,r);if(s){if(s===_)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===p)throw n=d,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=h;var c=l(e,t,r);if("normal"===c.type){if(n=r.done?d:f,c.arg===_)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=d,r.method="throw",r.arg=c.arg)}}}(e,r,i),o}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(k){return{type:"throw",arg:k}}}e.wrap=u;var p="suspendedStart",f="suspendedYield",h="executing",d="completed",_={};function v(){}function g(){}function y(){}var E={};E[i]=function(){return this};var m=Object.getPrototypeOf,T=m&&m(m(S([])));T&&T!==r&&n.call(T,i)&&(E=T);var O=y.prototype=v.prototype=Object.create(E);function I(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==typeof p&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;this._invoke=function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}}function A(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,A(e,r),"throw"===r.method))return _;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,_;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,_):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,_)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function S(e){if(e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}return{next:R}}function R(){return{value:t,done:!0}}return g.prototype=O.constructor=y,y.constructor=g,g.displayName=c(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,s,"GeneratorFunction")),e.prototype=Object.create(O),e},e.awrap=function(e){return{__await:e}},I(b.prototype),b.prototype[a]=function(){return this},e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},I(O),c(O,s,"Generator"),O[i]=function(){return this},O.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=S,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(w),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),w(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;w(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:S(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),_}},e}(e.exports);try{regeneratorRuntime=t}catch(r){Function("r","regeneratorRuntime = r")(t)}})),E={__proto__:null,HookEmitter:function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:console;v(this,e),this._hooks=new Map,this._onError=t}var t;return g(e,[{key:"on",value:function(e,t){var r=this;if(e&&t){this._hooks.has(e)||this._hooks.set(e,new Set);var n=this._hooks.get(e);return n&&n.add(t),function(){var n=r._hooks.get(e);n&&n.delete(t)}}var o=this.hookException("Error while try to subscribe on hook without passing name or handler!");this._onError.error(o)}},{key:"once",value:function(e,t){if(e&&t){var r=this.on(e,(function(e){t(e),r()}));return r}var n=this.hookException("Error while try to once subscribe on hook without passing name or handler!");this._onError.error(n)}},{key:"callHook",value:(t=_(y.mark((function e(t,r){var n,o,i,a,s,c;return y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=4;break}return n=this.hookException("Error while try to call hook without name or passing values!"),this._onError.error(n),e.abrupt("return");case 4:if(o=this._hooks.get(t),!(i=o?Array.from(o):[]).length){e.next=23;break}a=0;case 8:if(!(a<i.length)){e.next=23;break}if(!(s=i[a])){e.next=20;break}return e.prev=11,e.next=14,this.resolveHookPromise(s,r);case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(11),c=this.hookException(e.t0,s),this._onError.error(c);case 20:a++,e.next=8;break;case 23:case"end":return e.stop()}}),e,this,[[11,16]])}))),function(e,r){return t.apply(this,arguments)})},{key:"resolveHookPromise",value:function(e,t){var r=new Promise((function(e){return setTimeout(e,5e3)}));return Promise.race([e(t),r.then((function(){throw new Error("Time out in 5000 ms. while try to resolve hook!")}))])}},{key:"hookException",value:function(e,t){var r="string"==typeof e?new Error(e):new Error("Error during call hook!");return{exception:e instanceof Error?e:r,payload:{hook:t&&t.toString()},zone:"hook"}}}]),e}()},m=b,T=b,O=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,I=/android|ipad|playbook|silk/i;function b(e){e||(e={});var t=e.ua;if(t||"undefined"==typeof navigator||(t=navigator.userAgent),t&&t.headers&&"string"==typeof t.headers["user-agent"]&&(t=t.headers["user-agent"]),"string"!=typeof t)return!1;var r=O.test(t)||!!e.tablet&&I.test(t);return!r&&e.tablet&&e.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==t.indexOf("Macintosh")&&-1!==t.indexOf("Safari")&&(r=!0),r}m.isMobile=b,m.default=T;var A=n(E),C=r((function(t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=f,i=h,a=d,s=A;function c(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var u=c(o),l=c(n),p=c(a),_=c(m),g=function(e,t){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}g(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var E,T=function(){return(T=Object.assign||function(e){for(var t,r=arguments,n=1,o=arguments.length;n<o;n++)for(var i in t=r[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},O=Array.isArray,I="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},b="object"==typeof self&&self&&self.Object===Object&&self,C="object"==typeof I&&I&&I.Object===Object&&I||b||Function("return this")(),w=C.Symbol,N=Object.prototype,S=N.hasOwnProperty,R=N.toString,k=w?w.toStringTag:void 0,P=Object.prototype.toString,D=w?w.toStringTag:void 0,L=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":D&&D in Object(e)?function(e){var t=S.call(e,k),r=e[k];try{e[k]=void 0;var n=!0}catch(i){}var o=R.call(e);return n&&(t?e[k]=r:delete e[k]),o}(e):function(e){return P.call(e)}(e)},j=function(e){return"symbol"==typeof e||function(e){return null!=e&&"object"==typeof e}(e)&&"[object Symbol]"==L(e)},x=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,V=/^\w*$/,M=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},U=C["__core-js_shared__"],H=(E=/[^.]+$/.exec(U&&U.keys&&U.keys.IE_PROTO||""))?"Symbol(src)_1."+E:"",G=Function.prototype.toString,F=/^\[object .+?Constructor\]$/,B=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),K=function(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!M(e)||(t=e,H&&H in t))&&(function(e){if(!M(e))return!1;var t=L(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}(e)?B:F).test(function(e){if(null!=e){try{return G.call(e)}catch(t){}try{return e+""}catch(r){}}return""}(e));var t}(r)?r:void 0},W=K(Object,"create"),z=Object.prototype.hasOwnProperty,Y=Object.prototype.hasOwnProperty;function X(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}X.prototype.clear=function(){this.__data__=W?W(null):{},this.size=0},X.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},X.prototype.get=function(e){var t=this.__data__;if(W){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return z.call(t,e)?t[e]:void 0},X.prototype.has=function(e){var t=this.__data__;return W?void 0!==t[e]:Y.call(t,e)},X.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=W&&void 0===t?"__lodash_hash_undefined__":t,this};var $=X,q=function(e,t){for(var r=e.length;r--;)if((n=e[r][0])===(o=t)||n!=n&&o!=o)return r;var n,o;return-1},J=Array.prototype.splice;function Z(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Z.prototype.clear=function(){this.__data__=[],this.size=0},Z.prototype.delete=function(e){var t=this.__data__,r=q(t,e);return!(r<0||(r==t.length-1?t.pop():J.call(t,r,1),--this.size,0))},Z.prototype.get=function(e){var t=this.__data__,r=q(t,e);return r<0?void 0:t[r][1]},Z.prototype.has=function(e){return q(this.__data__,e)>-1},Z.prototype.set=function(e,t){var r=this.__data__,n=q(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};var Q=Z,ee=K(C,"Map"),te=function(e,t){var r,n,o=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof t?"string":"hash"]:o.map};function re(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}re.prototype.clear=function(){this.size=0,this.__data__={hash:new $,map:new(ee||Q),string:new $}},re.prototype.delete=function(e){var t=te(this,e).delete(e);return this.size-=t?1:0,t},re.prototype.get=function(e){return te(this,e).get(e)},re.prototype.has=function(e){return te(this,e).has(e)},re.prototype.set=function(e,t){var r=te(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};var ne=re;function oe(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=e.apply(this,n);return r.cache=i.set(o,a)||i,a};return r.cache=new(oe.Cache||ne),r}oe.Cache=ne;var ie,ae,se,ce,ue,le=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,pe=/\\(\\)?/g,fe=(ie=oe((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(le,(function(e,r,n,o){t.push(n?o.replace(pe,"$1"):r||e)})),t}),(function(e){return 500===ae.size&&ae.clear(),e})),ae=ie.cache,ie),he=w?w.prototype:void 0,de=he?he.toString:void 0,_e=function e(t){if("string"==typeof t)return t;if(O(t))return function(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}(t,e)+"";if(j(t))return de?de.call(t):"";var r=t+"";return"0"==r&&1/t==-Infinity?"-0":r},ve=function(e,t){return O(e)?e:function(e,t){if(O(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!j(e))||V.test(e)||!x.test(e)||null!=t&&e in Object(t)}(e,t)?[e]:fe(function(e){return null==e?"":_e(e)}(e))},ge=function(e){if("string"==typeof e||j(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t},ye=function(e,t,r){var n=null==e?void 0:function(e,t){for(var r=0,n=(t=ve(t,e)).length;null!=e&&r<n;)e=e[ge(t[r++])];return r&&r==n?e:void 0}(e,t);return void 0===n?r:n};function Ee(e){return""+(function(e){return e.indexOf("://")>0||0===e.indexOf("//")}(e)?"":window.location.origin)+e}function me(e){return"TSDK:"+e}!function(e){e.UNLOAD="unload",e.BEFORE_UNLOAD="beforeunload",e.LOAD="load"}(se||(se={})),(ce=r.ETrackerHooks||(r.ETrackerHooks={})).EVENT_ADD="EVENT_ADD",ce.EVENTS_SENT="EVENTS_SENT",function(e){e.START="start",e.END="end"}(ue||(ue={}));var Te,Oe=function(){function e(e){this.heldEvents=[],this.sentEvents=[],this.capacity=20,this.capacity=void 0!==e.capacity?e.capacity:20}return e.prototype.addHeldEvents=function(e,t){var r,n;void 0===t&&(t=ue.END),"start"===t?(r=this.heldEvents).unshift.apply(r,e):(n=this.heldEvents).push.apply(n,e)},e.prototype.addSentEvents=function(e){var t;(t=this.sentEvents).push.apply(t,e)},e.prototype.updateHeldEvent=function(e,t){return"object"==typeof this.heldEvents[e]&&(this.heldEvents[e].data=Object.assign({},t),!0)},e.prototype.deleteHeldEvent=function(e){return"object"==typeof this.heldEvents[e]&&(this.heldEvents.splice(e,1),!0)},e.prototype.clearHeldEvents=function(){this.heldEvents=[]},e.prototype.clearSentEvents=function(){this.sentEvents=[]},e.prototype._isFilled=function(){return this.heldEvents.length>=this.capacity},e}(),Ie=p.default.get("tracker_manager"),be=p.default.get("tracker_metrics");function Ae(){return{}}function Ce(e){return"object"==typeof e&&null!==e}function we(){try{return Ce(sessionStorage)}catch(v){if("Failed to read the 'sessionStorage' property from 'Window': Access is denied for this document."===v.message)return!1;throw v}}function Ne(){try{return Ce(localStorage)}catch(v){if("Failed to read the 'localStorage' property from 'Window': Access is denied for this document."===v.message)return!1;throw v}}function Se(){if(we()){var e=sessionStorage.getItem(me("pageHash"));Ne()&&localStorage.removeItem(me(e))}}function Re(){var e=Te.NAVIGATE;if("object"==typeof window&&"object"==typeof window.performance)if("object"==typeof window.performance.navigation)e=window.performance.navigation.type?Te.RELOAD:Te.NAVIGATE;else if("function"==typeof performance.getEntriesByType){var t=performance.getEntriesByType("navigation").map((function(e){return e.type}));e=t[0]&&"reload"===t[0]?Te.RELOAD:Te.NAVIGATE}return e}!function(e){e.NAVIGATE="navigate",e.RELOAD="reload",e.NAVIGATE_WITH_RELOAD="navigate_with_reload",e.NAVIGATE_IN_NEW_TAB="navigate_in_new_tab"}(Te||(Te={}));var ke=function(e){void 0===e&&(e=21);for(var t="",r=e;r--;)t+="abcdef0123456789"[16*Math.random()|0];return t};function Pe(){return ke(8)+"-"+ke(4)+"-4"+ke(3)+"-"+ke(4)+"-"+ke(12)}function De(e,t,r){var n="";if(e.length<r)for(var o=0;o<r-e.length;++o)n+=t;return n+e}var Le=function(e,t){this.options=t,this.event=Object.assign({},e),this.event.attributes=this.setEventAttributes(this.event.attributes)},je={name:"event",constructor:function(e){function t(t,r){return e.call(this,t,r)||this}return y(t,e),t.prototype.setEventAttributes=function(e){return void 0===e&&(e={}),e.userAgent=void 0!==e.userAgent?e.userAgent:navigator.userAgent,e.platform=void 0!==e.platform?e.platform:this.options.platform,e.screenResolutionX=void 0!==e.screenResolutionX?e.screenResolutionX:screen.width,e.screenResolutionY=void 0!==e.screenResolutionY?e.screenResolutionY:screen.height,e},t}(Le)},xe=function(){function e(e,t){this.navigationType=Re(),this.viewNumber=1,this.pageNumber=1,this.nextPageNumber=1,this.currentUrl="",this.referralUrl="",this.pageViewId=Pe(),this.previousPageViewId=void 0,this.currentPageType="",this.previousPageType=void 0,this.pageInit=!1,this.isMobile=_.default({tablet:!1,featureDetect:!0}),this.supplier=new Map,this.namespace=e.namespace,this.version=e.version||"unknown",this.registryEvents(t),this.registryOnInit(),window.addEventListener(se.BEFORE_UNLOAD,Se)}return e.prototype.getEventByType=function(e,t){void 0===t&&(t={});var r=this.supplier.get(e);if(void 0===r)throw new Error("Не удалось получить конструктор события по ключу - "+e);var n,o=new r(t,{platform:this.isMobile?i.EPlatform.MOBILE_SITE:i.EPlatform.SITE}).event;return o.actionType===i.EActionTypes.PAGE_VIEW_ACTION&&(this.savePageViewInformation(o.page),this.currentPageType="object"==typeof o.page&&void 0!==o.page.current?o.page.current:"",this.enrichEvent(o)),o.timestamp=o.timestamp||(n=new Date).getFullYear()+"-"+De((n.getMonth()+1).toString(),"0",2)+"-"+De(n.getDate().toString(),"0",2)+" "+De(n.getHours().toString(),"0",2)+":"+De(n.getMinutes().toString(),"0",2)+":"+De(n.getSeconds().toString(),"0",2)+" "+function(e){var t=e.getTimezoneOffset()>0?"-":"+",r=Math.abs(e.getTimezoneOffset());return t+De(Math.floor(r/60).toString(),"0",2)+De((r%60).toString(),"0",2)}(n),o.attributes.namespace=o.actionType===i.EActionTypes.SCREEN_CLICK?"native":this.namespace,o.attributes.appVersion=me(this.version),o.uuid=o.uuid||Pe(),o},e.prototype.enrichEvent=function(e){return void 0===e&&(e={}),e.page=Object.assign({},e.page),e.page.number=this.pageNumber,e.page.currentUrl=this.currentUrl,e.page.current=this.currentPageType,e.page.referralUrl=this.referralUrl,e.page.previous=this.previousPageType,e.page.pageViewId=this.pageViewId,e.page.previousPageViewId=this.previousPageViewId,e},e.prototype.registryEvents=function(e){if(this.supplier.set(je.name,je.constructor),Array.isArray(e))for(var t=0;t<e.length;t++){var r=e[t];r.name!==je.name&&this.supplier.set(r.name,r.constructor)}},e.prototype.registryOnInit=function(){var e=we()?sessionStorage.getItem(me("pageHash")):null,t=we()?sessionStorage.getItem(me("customReferrer")):"";this.pageInit=function(){if(we()){var e=Re(),t=sessionStorage.getItem(me("pageInit"));return null!==t&&"false"!==t&&e!==Te.RELOAD||(sessionStorage.setItem(me("pageInit"),"true"),!1)}return!1}();var r=this.pageInit&&null!==e&&!document.referrer?e:document.referrer;this.currentUrl=window.location.href,this.referralUrl=this.navigationType===Te.RELOAD&&null!==t?t:r,!we()||null!==t&&""!==t&&this.navigationType===Te.RELOAD||sessionStorage.setItem(me("customReferrer"),document.referrer),Object.defineProperty(document,"referrer",{value:Ee(this.referralUrl||"/"),writable:!0});var n=function(){if(we()){var e=sessionStorage.getItem(me("nextPageNumber"));return null!==e?e:null}return null}();null!==n&&(this.pageNumber=Number(n),this.nextPageNumber=this.pageNumber),this.getInformationFromStorage()},e.prototype.setViewNumber=function(){var e=this.viewNumber++;return this.viewNumber>=Number.MAX_SAFE_INTEGER&&(this.viewNumber=1),e},e.prototype.setNextPageNumber=function(){var e=this.nextPageNumber++;return this.nextPageNumber>=Number.MAX_SAFE_INTEGER&&(this.nextPageNumber=1),e},e.prototype.savePageViewInformation=function(e){void 0===e&&(e={}),this.pageNumber=this.setNextPageNumber();var t,r=this.setViewNumber();this.pageNumber>1&&(this.pageViewId=Pe(),this.pageInit&&this.trackPageTransition(r,e.currentUrl,e.referralUrl)),t=this.nextPageNumber,we()&&sessionStorage.setItem(me("nextPageNumber"),String(t)),this.pageInit&&Ne()&&localStorage.removeItem(me(this.referralUrl)),function(e,t){var r=Re();if(we()){sessionStorage.setItem(me("pageHash"),e);var n=JSON.parse(sessionStorage.getItem(me("pageData"))||"{}"),o=Object.keys(n);2===o.length&&r!==Te.RELOAD&&delete n[o[0]],n[e]=t,sessionStorage.setItem(me("pageData"),JSON.stringify(n))}Ne()&&localStorage.setItem(me(e),JSON.stringify(t))}(this.currentUrl,{pageViewId:this.pageViewId,pageType:e.current}),this.pageInit=!0},e.prototype.trackPageTransition=function(e,t,r){var n=e>1;n&&void 0===t&&console.warn("При spa-переходе необходимо прокидывать обновлённый url в page.currentUrl.");var o,i=n?this.currentUrl:this.referralUrl;n&&(Object.defineProperty(document,"referrer",{value:i,writable:!0}),o=Te.NAVIGATE===Te.RELOAD?1:0,"object"==typeof window&&("object"==typeof window.performance.navigation?Object.defineProperties(window.performance.navigation,{type:{value:o,writable:!0}}):Object.defineProperties(window.performance,{navigation:{value:{type:o},writable:!0}})),we()&&sessionStorage.setItem(me("customReferrer"),i));var a=void 0!==r?r:i;this.currentUrl=Ee(void 0!==t?t:this.currentUrl),this.referralUrl=Ee(a||"/"),this.getInformationFromStorage()},e.prototype.getInformationFromStorage=function(){var e=function(e){if(we()&&Ne()){var t=""!==e?e:sessionStorage.getItem(me("pageHash")),r=sessionStorage.getItem(me("pageData"));if(null!==t&&null!==r){var n=JSON.parse(r||"{}");return"object"==typeof n[t]&&Object.keys(n[t]).length?n[t]:{}}return JSON.parse(localStorage.getItem(me(e))||"{}")}return{}}(this.referralUrl);this.saveData(e)},e.prototype.saveData=function(e){this.previousPageType=e.pageType,this.previousPageViewId=e.pageViewId},e}();(r.EDefaultEvents||(r.EDefaultEvents={})).EVENT="event";var Ve=function(e){function t(t,n){var o=e.call(this)||this;o.config={},o.isTMEnabled=!1,o.isTMAllowed=Boolean(p.default.get("tracker_manager")),o.isPageViewSent=!1,o.isPageCloseSent=void 0,o.isOnUnload=!1;try{o.config=function(e){var t=Object.assign({},e);if(!t.namespace)throw new Error("Необходимо установить параметр namespace в конструктор Tracker SDK");t.dev=void 0!==t.dev&&t.dev;var r="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname,n=r||t.dev?"https://trinity-storage-stg.ozonru.me/v1/json-payloads":"https://trinity-storage.t.o3.ru/v1/json-payloads",o=r||t.dev?"https://cdn-qa.ozonru.me":"https://cdn2.ozone.ru",i=r||t.dev?"https://cdn-qa.ozonru.me":"https://cdn2.ozone.ru";return t.host=void 0!==t.host?t.host:r||t.dev?"https://xapi-stg.ozonru.me/dlte/multi":"https://xapi.ozon.ru/dlte/multi",t.trinityStorageUrl=void 0!==t.trinityStorageUrl?t.trinityStorageUrl:n,t.manager={enable:"object"==typeof t.manager&&!0===t.manager.enable?t.manager.enable:Boolean(Ie),host:"object"==typeof t.manager&&void 0!==t.manager.host?t.manager.host:o},t.metrics={enable:"object"==typeof t.metrics&&!0===t.metrics.enable?t.metrics.enable:Boolean(be),host:"object"==typeof t.metrics&&void 0!==t.metrics.host?t.metrics.host:i},t.sendTimeout=void 0!==t.sendTimeout?t.sendTimeout:2e4,t.pageViewEnabled=void 0===t.pageViewEnabled||t.pageViewEnabled,t.pageCloseEnabled=void 0===t.pageCloseEnabled||t.pageCloseEnabled,t.eventTemplate="function"==typeof t.eventTemplate?t.eventTemplate:Ae,t.pageAdditional=void 0!==t.pageAdditional?t.pageAdditional:{},t}(Object.assign({},t))}catch(u){throw console.error(u),u}try{o.store=new Oe({capacity:o.config.capacity})}catch(_){throw console.error(_),_}try{o.factory=new xe({namespace:o.config.namespace,version:o.config.version},n)}catch(g){throw console.error(g),g}o.sendTimeout=o.config.sendTimeout,setTimeout((function(){if(-1!==("object"==typeof PerformanceObserver&&Array.isArray(PerformanceObserver.supportedEntryTypes)||[]).indexOf("layout-shift")){var e=function(){"hidden"===document.visibilityState&&(o.flush(),removeEventListener("visibilitychange",e,!0))};addEventListener("visibilitychange",e,!0)}else addEventListener("pagehide",(function(){return o.flush()}),{capture:!0,once:!0})})),window.addEventListener(se.BEFORE_UNLOAD,(function(){o.isOnUnload=!0,o.config.pageCloseEnabled?o.sendPageClose():o.flush()}));var a=ye(window,"screen.width"),s=ye(window,"screen.height");return 1920===a&&1080===s&&(document.onclick=function(e){var t={object:{type:"screen"},properties:{coordinateY:e.clientY,coordinateX:e.clientX},widget:{name:"core.screen"},actionType:i.EActionTypes.SCREEN_CLICK},n="function"==typeof o.config.eventTemplate?o.config.eventTemplate():{},a=l.default.all([o.config.pageAdditional,n,t]),s=o.factory.getEventByType(r.EDefaultEvents.EVENT,a);o.add(r.EDefaultEvents.EVENT,s)}),o}return y(t,e),t.prototype.setTMFlag=function(e){this.isTMEnabled=e},t.prototype.sendPageView=function(e){void 0===e&&(e={}),this.isPageViewSent=!1,this.isPageCloseSent=void 0,this.sendCustomPageEvent(i.EActionTypes.PAGE_VIEW_ACTION,e)},t.prototype.sendPageClose=function(e){void 0===e&&(e={}),this.factory.pageInit&&!this.isPageCloseSent&&(this.isPageCloseSent=!1,this.sendCustomPageEvent(i.EActionTypes.PAGE_CLOSE,e))},t.prototype.add=function(e,t,n){var o=this;if(void 0===n&&(n={}),!this.isPageViewSent)return this.store.addHeldEvents([{key:e,data:t}]),!0;var i=this.factory.enrichEvent(t);if(!1===this.isPageCloseSent||this.isOnUnload&&void 0===this.isPageCloseSent)return void 0!==this.sendTimerId&&clearTimeout(this.sendTimerId),this.store.addHeldEvents([{key:e,data:i}]),!0;this.store._isFilled()&&this.sendEvents();var a=n.force,s=void 0!==a&&a;return this.store.addHeldEvents([{key:e,data:i}]),this.callHook(r.ETrackerHooks.EVENT_ADD,{key:e,data:i}).catch(console.error),void 0!==this.sendTimerId&&clearTimeout(this.sendTimerId),s?(this.flush(),!this.store._isFilled()):(this.isTMEnabled||(this.sendTimerId=setTimeout((function(){o.sendEvents()}),this.sendTimeout)),!this.store._isFilled())},t.prototype.flush=function(){return void 0!==this.sendTimerId&&(clearTimeout(this.sendTimerId),this.sendTimerId=void 0),this.sendEvents(),!0},t.prototype.sendEvents=function(){var e=this.store.heldEvents.concat();if(!e.length)return!1;var t=e.map((function(e){var t;return(t={})[e.key]=e.data,t})),n=u.default(this.config.host,function(e){return'{"events":'+e+"}"}(JSON.stringify(t)));return n&&(this.store.clearHeldEvents(),this.isTMAllowed&&this.store.addSentEvents(e),this.callHook(r.ETrackerHooks.EVENTS_SENT,e).catch(console.error)),n},t.prototype.sendCustomPageEvent=function(e,t){var n=this;void 0===t&&(t={}),t.actionType=e,t.object=T(T({},t.object),{type:"page"});var o="function"==typeof this.config.eventTemplate?this.config.eventTemplate():{},a=l.default.all([this.config.pageAdditional,o,t]),s=this.factory.getEventByType(r.EDefaultEvents.EVENT,a);s.actionType===i.EActionTypes.PAGE_VIEW_ACTION&&(this.store.heldEvents=this.store.heldEvents.concat().map((function(e){return T(T({},e),{data:n.factory.enrichEvent(e.data)})})),this.store.addHeldEvents([{key:r.EDefaultEvents.EVENT,data:s}],ue.START),this.isPageViewSent=this.sendEvents()),s.actionType===i.EActionTypes.PAGE_CLOSE&&(this.store.addHeldEvents([{key:r.EDefaultEvents.EVENT,data:this.factory.enrichEvent(s)}]),this.isPageCloseSent=this.sendEvents())},t}(s.HookEmitter),Me=function(){function e(){}return e.prototype.createTrackerCore=function(e,t){return"object"==typeof this.core||(this.core=new Ve(e,t)),this.core},e.prototype.on=function(e,t){return this.core.on(e,t)},e.prototype.once=function(e,t){return this.core.once(e,t)},e.prototype.setTMFlag=function(e){"object"==typeof this.core&&this.core.setTMFlag(e)},e.prototype.flush=function(){"object"==typeof this.core&&this.core.flush()},e.prototype.sendEvents=function(){return"object"==typeof this.core&&this.core.sendEvents()},e}();r.CommonEventModel=Le,r.TRACKER_KEY_WITH_PREFIX=me,r.Tracker=Ve,r.TrackerCoreInitialize=Me,r.WINDOW_TRACKER_FIELD="$tracker",r.generateClickHouseUUID=Pe,r.nanoid=ke})),w=function(e,t){return(w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},N=function(){return(N=Object.assign||function(e){for(var t,r=arguments,n=1,o=arguments.length;n<o;n++)for(var i in t=r[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},S=r((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.loadTrackerManagerScript=function(e,t){var r=document.createElement("script"),n=document.getElementsByTagName("script")[0];r.async=!0,r.src=e+"/s3/oztm/1.1.3/manager.js",void 0!==t&&r.setAttribute("nonce",t),n.parentNode&&n.parentNode.insertBefore(r,n);var o=setInterval((function(){if(window.$trackerManager&&"function"==typeof window.$trackerManager){var e=window.$trackerManager,t=document.createElement("div");document.body.appendChild(t),new e({target:t}),clearInterval(o)}}),1e3)}})),R=function(e){function t(){var t=e.call(this)||this;return t.version="1.3.4",t.trackerSessionId="",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}w(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(t,e),t.prototype.init=function(e){var t=["sc","GlobalLanding","profit-portal-fe","principal-ui","docs","sx-docs","sc-landing"].includes(e.namespace);if(!t){var r=d.get("TSDK_trackerSessionId");r?this.trackerSessionId=r:(this.trackerSessionId=C.nanoid(8)+"-"+C.nanoid(4)+"-"+C.nanoid(4)+"-"+C.nanoid(4),d.set("TSDK_trackerSessionId",this.trackerSessionId))}var n=t?{}:{user:{sessionId:this.trackerSessionId}},o=this.createTrackerCore(N(N({},e),{version:this.version,pageAdditional:n}));return"object"!=typeof window||C.WINDOW_TRACKER_FIELD in window||(window[C.WINDOW_TRACKER_FIELD]=this),"object"==typeof o.config.manager&&!0===o.config.manager.enable&&S.loadTrackerManagerScript(o.config.manager.host,o.config.cspNonce),o.config.pageViewEnabled&&this.sendPageView(),this},t.prototype.sendPageView=function(e){void 0===e&&(e={}),"object"==typeof this.core&&this.core.sendPageView(e)},t.prototype.sendPageClose=function(e){void 0===e&&(e={}),"object"==typeof this.core&&this.core.sendPageClose(e)},t.prototype.sendEvent=function(e,t){if(void 0===t&&(t={}),"object"==typeof this.core){var r="function"==typeof this.core.config.eventTemplate?this.core.config.eventTemplate():{},n=f(r,e),o=this.core.factory.getEventByType(C.EDefaultEvents.EVENT,n);return""!==this.trackerSessionId&&(o.user=o.user||{},o.user.sessionId=void 0!==o.user.sessionId?o.user.sessionId:this.trackerSessionId),this.core.add(C.EDefaultEvents.EVENT,o,t)}return!1},t}(C.TrackerCoreInitialize);"object"!=typeof window||C.WINDOW_TRACKER_FIELD in window||(window[C.WINDOW_TRACKER_FIELD]=new R)}();
